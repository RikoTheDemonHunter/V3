-- Avery's Full SafeZone Script with RGB Color Picker (No Safe Spot / No Leaderboard)
repeat task.wait() until game:IsLoaded()

local Players = game:GetService("Players")
local player = Players.LocalPlayer

-- GUI Setup
local screenGui = Instance.new("ScreenGui")
screenGui.Name = "SafeZoneGui"
screenGui.ResetOnSpawn = false
screenGui.Parent = player:WaitForChild("PlayerGui")

-- Toggle SafeZone Button
local toggleButton = Instance.new("TextButton")
toggleButton.Size = UDim2.new(0,160,0,50)
toggleButton.Position = UDim2.new(0.05,0,0.2,0)
toggleButton.Text = "Toggle SafeZone"
toggleButton.BackgroundColor3 = Color3.fromRGB(30,30,30)
toggleButton.TextColor3 = Color3.fromRGB(255,255,255)
toggleButton.Font = Enum.Font.SourceSansBold
toggleButton.TextSize = 20
toggleButton.Draggable = true
toggleButton.Active = true
toggleButton.Parent = screenGui

-- Color Picker GUI
local colorFrame = Instance.new("Frame")
colorFrame.Size = UDim2.new(0,250,0,180)
colorFrame.Position = UDim2.new(0.05,0,0.4,0)
colorFrame.BackgroundColor3 = Color3.fromRGB(25,25,25)
colorFrame.BorderSizePixel = 0
colorFrame.Parent = screenGui
colorFrame.Draggable = true

local title = Instance.new("TextLabel")
title.Size = UDim2.new(1,0,0,30)
title.Position = UDim2.new(0,0,0,0)
title.BackgroundTransparency = 1
title.Text = "SafeZone Color Picker"
title.Font = Enum.Font.GothamBold
title.TextSize = 18
title.TextColor3 = Color3.fromRGB(255,255,255)
title.Parent = colorFrame

local function createSlider(name, yPos)
	local label = Instance.new("TextLabel")
	label.Size = UDim2.new(0,50,0,20)
	label.Position = UDim2.new(0,10,0,yPos)
	label.BackgroundTransparency = 1
	label.Text = name
	label.Font = Enum.Font.Gotham
	label.TextSize = 14
	label.TextColor3 = Color3.fromRGB(255,255,255)
	label.TextXAlignment = Enum.TextXAlignment.Left
	label.Parent = colorFrame

	local slider = Instance.new("TextBox")
	slider.Size = UDim2.new(0,150,0,20)
	slider.Position = UDim2.new(0,80,0,yPos)
	slider.BackgroundColor3 = Color3.fromRGB(50,50,50)
	slider.Text = "255"
	slider.ClearTextOnFocus = false
	slider.TextColor3 = Color3.fromRGB(255,255,255)
	slider.Font = Enum.Font.SourceSansBold
	slider.TextSize = 14
	slider.Parent = colorFrame

	return slider
end

local sliderR = createSlider("R",40)
local sliderG = createSlider("G",70)
local sliderB = createSlider("B",100)

local applyButton = Instance.new("TextButton")
applyButton.Size = UDim2.new(0,200,0,30)
applyButton.Position = UDim2.new(0,25,0,140)
applyButton.Text = "Apply Color"
applyButton.Font = Enum.Font.GothamBold
applyButton.TextSize = 16
applyButton.TextColor3 = Color3.fromRGB(255,255,255)
applyButton.BackgroundColor3 = Color3.fromRGB(0,170,255)
applyButton.Parent = colorFrame

-- RGB flash effect
local function RGBFlash(part)
	task.spawn(function()
		local colors = {Color3.fromRGB(255,0,0), Color3.fromRGB(255,255,0), Color3.fromRGB(0,255,0)}
		for _,c in ipairs(colors) do
			part.Color = c
			task.wait(0.15)
		end
	end)
end

-- RGB Effect for signs
local function RGBEffect(label)
	if not label then return end
	task.spawn(function()
		while label and label.Parent do
			for hue=0,255,4 do
				if label and label.Parent then
					label.TextColor3 = Color3.fromHSV(hue/255,1,1)
					task.wait(0.05)
				end
			end
		end
	end)
end

-- SafeZone Folder
local safeZoneFolder = nil
local running = false
local safeZoneParts = {}

-- Create SafeZone
local function createSafeZone()
	if safeZoneFolder then return end
	safeZoneFolder = Instance.new("Folder")
	safeZoneFolder.Name = "SafeZone"
	safeZoneFolder.Parent = workspace

	local cubeSize = 600
	local cubeHeight = 3600
	local yPos = 3600
	local wallThickness = 20
	local entranceWidth = 100
	local entranceHeight = 200

	-- Floor
	local floor = Instance.new("Part")
	floor.Size = Vector3.new(cubeSize,10,cubeSize)
	floor.Position = Vector3.new(0,yPos+5,0)
	floor.Anchored = true
	floor.Material = Enum.Material.SmoothPlastic
	floor.Transparency = 0.5
	floor.Reflectance = 0.2
	floor.BrickColor = BrickColor.new("Bright blue")
	floor.Name = "Floor"
	floor.Parent = safeZoneFolder
	table.insert(safeZoneParts,floor)

	-- Walls
	local function createWall(position,size,orientation)
		local wall = Instance.new("Part")
		wall.Size = size
		wall.Position = position
		wall.Anchored = true
		wall.Material = Enum.Material.SmoothPlastic
		wall.Transparency = 0.4
		wall.BrickColor = BrickColor.new("Bright blue")
		if orientation then wall.Orientation = orientation end
		wall.Parent = safeZoneFolder
		table.insert(safeZoneParts,wall)
		return wall
	end

	createWall(Vector3.new(-cubeSize/2,yPos+cubeHeight/2,0),Vector3.new(wallThickness,cubeHeight,cubeSize)) -- left
	createWall(Vector3.new(cubeSize/2,yPos+cubeHeight/2,0),Vector3.new(wallThickness,cubeHeight,cubeSize))  -- right
	createWall(Vector3.new(0,yPos+cubeHeight/2,cubeSize/2),Vector3.new(cubeSize,cubeHeight,wallThickness)) -- back

	-- Front wall split for entrance
	local frontLeft = Instance.new("Part")
	frontLeft.Size = Vector3.new((cubeSize-entranceWidth)/2,cubeHeight,wallThickness)
	frontLeft.Position = Vector3.new(-(cubeSize-entranceWidth)/4 - entranceWidth/2,yPos+cubeHeight/2,-cubeSize/2)
	frontLeft.Anchored = true
	frontLeft.Material = Enum.Material.SmoothPlastic
	frontLeft.Transparency = 0.4
	frontLeft.BrickColor = BrickColor.new("Bright blue")
	frontLeft.Parent = safeZoneFolder
	table.insert(safeZoneParts,frontLeft)

	local frontRight = Instance.new("Part")
	frontRight.Size = Vector3.new((cubeSize-entranceWidth)/2,cubeHeight,wallThickness)
	frontRight.Position = Vector3.new((cubeSize-entranceWidth)/4 + entranceWidth/2,yPos+cubeHeight/2,-cubeSize/2)
	frontRight.Anchored = true
	frontRight.Material = Enum.Material.SmoothPlastic
	frontRight.Transparency = 0.4
	frontRight.BrickColor = BrickColor.new("Bright blue")
	frontRight.Parent = safeZoneFolder
	table.insert(safeZoneParts,frontRight)

	-- Path
	local pathWidth = 100
	local pathLength = 300
	local path = Instance.new("Part")
	path.Size = Vector3.new(pathWidth,10,pathLength)
	path.Position = Vector3.new(0,yPos+5,-cubeSize/2 - pathLength/2)
	path.Anchored = true
	path.Material = Enum.Material.Concrete
	path.BrickColor = BrickColor.new("Medium stone grey")
	path.Parent = safeZoneFolder

	-- Wider Baseplate
	local baseplateWidth = 800
	local baseplateDepth = 600
	local baseplate = Instance.new("Part")
	baseplate.Size = Vector3.new(baseplateWidth,10,baseplateDepth)
	baseplate.Position = Vector3.new(0,yPos-5,-cubeSize/2 - pathLength - baseplateDepth/2)
	baseplate.Anchored = true
	baseplate.Material = Enum.Material.Grass
	baseplate.BrickColor = BrickColor.new("Bright green")
	baseplate.Parent = safeZoneFolder

	-- Avatar Statue in middle of baseplate
	local character = player.Character or player.CharacterAdded:Wait()
	local statue = character:Clone()
	for _,part in pairs(statue:GetDescendants()) do
		if part:IsA("BasePart") then
			part.Anchored = true
			part.Material = Enum.Material.SmoothPlastic
			part.Reflectance = 0.3
		end
	end
	if statue.PrimaryPart then
		statue:SetPrimaryPartCFrame(CFrame.new(0,yPos+15,-cubeSize/2 - pathLength - baseplateDepth/2))
	end
	statue.Parent = safeZoneFolder
end

-- Remove SafeZone
local function removeSafeZone()
	if safeZoneFolder and safeZoneFolder.Parent then
		safeZoneFolder:Destroy()
		safeZoneFolder = nil
		safeZoneParts = {}
	end
end

-- Toggle button
toggleButton.MouseButton1Click:Connect(function()
	if running then
		removeSafeZone()
	else
		createSafeZone()
	end
	running = not running
end)

-- Apply color from GUI
applyButton.MouseButton1Click:Connect(function()
	if not safeZoneFolder then return end
	local r = math.clamp(tonumber(sliderR.Text) or 0,0,255)
	local g = math.clamp(tonumber(sliderG.Text) or 0,0,255)
	local b = math.clamp(tonumber(sliderB.Text) or 0,0,255)
	local newColor = Color3.fromRGB(r,g,b)

	for _,part in pairs(safeZoneParts) do
		if part:IsA("Part") then
			part.Color = newColor
			RGBFlash(part)
		end
	end
end)
