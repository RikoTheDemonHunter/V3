-- Avery's Safe Zone Script
-- Works on PC + Mobile (draggable toggle button)

repeat wait() until game:IsLoaded()
local Players = game:GetService("Players")
local player = Players.LocalPlayer

-- Remove old SafePlace if it exists
if workspace:FindFirstChild("SafePlace") then
	workspace.SafePlace:Destroy()
end

-- GUI Setup
local screenGui = Instance.new("ScreenGui")
screenGui.Name = "SafeZoneGUI"
screenGui.Parent = player:WaitForChild("PlayerGui")
screenGui.ResetOnSpawn = false

local toggleButton = Instance.new("TextButton")
toggleButton.Parent = screenGui
toggleButton.Size = UDim2.new(0, 160, 0, 50)
toggleButton.Position = UDim2.new(0.1, 0, 0.1, 0)
toggleButton.Text = "Toggle SafeZone"
toggleButton.BackgroundColor3 = Color3.fromRGB(40, 40, 40)
toggleButton.TextColor3 = Color3.fromRGB(255, 255, 255)
toggleButton.TextScaled = true
toggleButton.Active = true
toggleButton.Draggable = true -- mobile/pc draggable

local SafeZoneActive = false
local folder

-- RGB Effect for sign
local function startRGB(textLabel)
	spawn(function()
		local hue = 0
		while textLabel.Parent do
			hue = (hue + 1) % 360
			textLabel.TextColor3 = Color3.fromHSV(hue/360,1,1)
			wait(0.05)
		end
	end)
end

-- Function to spawn SafeZone
local function createSafeZone()
	folder = Instance.new("Folder")
	folder.Name = "SafePlace"
	folder.Parent = workspace

	-- Main Floor (HUGE)
	local floor = Instance.new("Part")
	floor.Size = Vector3.new(2048, 10, 2048)
	floor.Position = Vector3.new(0, 150, 0)
	floor.Anchored = true
	floor.Name = "Floor"
	floor.Parent = folder

	-- Walls
	local wallThickness = 20
	local wallHeight = 300
	local size = 2048

	local function makeWall(pos, sizeVec)
		local wall = Instance.new("Part")
		wall.Size = sizeVec
		wall.Position = pos
		wall.Anchored = true
		wall.Parent = folder
		return wall
	end

	makeWall(Vector3.new(0, 150 + wallHeight/2, -size/2), Vector3.new(size, wallHeight, wallThickness)) -- Back
	makeWall(Vector3.new(0, 150 + wallHeight/2, size/2), Vector3.new(size, wallHeight, wallThickness)) -- Front
	makeWall(Vector3.new(-size/2, 150 + wallHeight/2, 0), Vector3.new(wallThickness, wallHeight, size)) -- Left
	makeWall(Vector3.new(size/2, 150 + wallHeight/2, 0), Vector3.new(wallThickness, wallHeight, size)) -- Right

	-- Entrance Opening (front wall hole)
	local entrance = Instance.new("Part")
	entrance.Size = Vector3.new(40, wallHeight, wallThickness)
	entrance.Position = Vector3.new(0, 150 + wallHeight/2, size/2)
	entrance.Anchored = true
	entrance.Transparency = 1
	entrance.CanCollide = false
	entrance.Parent = folder

	-- Pathway
	local path = Instance.new("Part")
	path.Size = Vector3.new(50, 5, 300)
	path.Position = Vector3.new(0, 150, size/2 + 150)
	path.Anchored = true
	path.Parent = folder

	-- Ramp Stairway
	local ramp = Instance.new("Part")
	ramp.Size = Vector3.new(50, 5, 100)
	ramp.Position = Vector3.new(0, 125, size/2 + 50)
	ramp.Anchored = true
	ramp.CFrame = ramp.CFrame * CFrame.Angles(math.rad(-30), 0, 0)
	ramp.Parent = folder

	-- Sign
	local signPart = Instance.new("Part")
	signPart.Size = Vector3.new(60, 20, 2)
	signPart.Position = Vector3.new(0, 300, size/2 + 5)
	signPart.Anchored = true
	signPart.Parent = folder

	local surfaceGui = Instance.new("SurfaceGui", signPart)
	surfaceGui.Face = Enum.NormalId.Front
	surfaceGui.AlwaysOnTop = true

	local textLabel = Instance.new("TextLabel", surfaceGui)
	textLabel.Size = UDim2.new(1, 0, 1, 0)
	textLabel.BackgroundTransparency = 1
	textLabel.Text = "Avery's Safe Zone"
	textLabel.Font = Enum.Font.Fantasy
	textLabel.TextScaled = true
	textLabel.TextColor3 = Color3.fromRGB(0, 255, 0)

	startRGB(textLabel)

	-- Avatar Statue
	local char = player.Character or player.CharacterAdded:Wait()
	local clone = char:Clone()
	clone.Parent = folder
	clone.Name = "AveryStatue"
	for _, v in pairs(clone:GetDescendants()) do
		if v:IsA("BasePart") then
			v.Anchored = true
			v.CanCollide = true
		elseif v:IsA("Humanoid") then
			v:Destroy()
		end
	end
	clone:SetPrimaryPartCFrame(CFrame.new(0, 160, 0))
end

-- Toggle Button
toggleButton.MouseButton1Click:Connect(function()
	if SafeZoneActive then
		if folder then folder:Destroy() end
		SafeZoneActive = false
		toggleButton.Text = "Enable SafeZone"
	else
		createSafeZone()
		SafeZoneActive = true
		toggleButton.Text = "Disable SafeZone"
	end
end)
