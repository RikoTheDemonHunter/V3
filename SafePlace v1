-- Avery's SafeZone Cube Version with Path and Signs
repeat task.wait() until game:IsLoaded()

local Players = game:GetService("Players")
local player = Players.LocalPlayer

-- GUI Setup
local screenGui = Instance.new("ScreenGui")
screenGui.Name = "SafeZoneGui"
screenGui.ResetOnSpawn = false
screenGui.Parent = player:WaitForChild("PlayerGui")

local toggleButton = Instance.new("TextButton")
toggleButton.Size = UDim2.new(0, 160, 0, 50)
toggleButton.Position = UDim2.new(0.05, 0, 0.2, 0)
toggleButton.Text = "Toggle SafeZone"
toggleButton.BackgroundColor3 = Color3.fromRGB(30, 30, 30)
toggleButton.TextColor3 = Color3.fromRGB(255, 255, 255)
toggleButton.Font = Enum.Font.SourceSansBold
toggleButton.TextSize = 20
toggleButton.Draggable = true
toggleButton.Active = true
toggleButton.Parent = screenGui

local safeZoneFolder = nil
local running = false

-- RGB text effect
local function RGBEffect(label)
	if not label then return end
	task.spawn(function()
		while label and label.Parent do
			for hue = 0, 255, 4 do
				if label and label.Parent then
					label.TextColor3 = Color3.fromHSV(hue/255, 1, 1)
					task.wait(0.05)
				end
			end
		end
	end)
end

-- Create cube SafeZone with path
local function createSafeZone()
	if safeZoneFolder then return end
	safeZoneFolder = Instance.new("Folder")
	safeZoneFolder.Name = "SafeZone"
	safeZoneFolder.Parent = workspace

	local cubeSize = 600
	local cubeHeight = 600
	local yPos = 2000
	local wallThickness = 20

	-- Floor inside cube
	local floor = Instance.new("Part")
	floor.Size = Vector3.new(cubeSize, 10, cubeSize)
	floor.Position = Vector3.new(0, yPos + 5, 0)
	floor.Anchored = true
	floor.Material = Enum.Material.SmoothPlastic
	floor.Transparency = 0.5
	floor.Reflectance = 0.2
	floor.BrickColor = BrickColor.new("Bright blue")
	floor.Parent = safeZoneFolder

	-- Helper to create wall with embedded sign
	local function createWall(position, size, orientation)
		local wall = Instance.new("Part")
		wall.Size = size
		wall.Position = position
		wall.Anchored = true
		wall.Material = Enum.Material.SmoothPlastic
		wall.Transparency = 0.4
		wall.BrickColor = BrickColor.new("Bright blue")
		if orientation then wall.Orientation = orientation end
		wall.Parent = safeZoneFolder

		-- Sign embedded in wall
		local sign = Instance.new("Part")
		sign.Size = Vector3.new(150, 30, 5)
		sign.Anchored = true
		sign.Material = Enum.Material.SmoothPlastic
		sign.Color = Color3.fromRGB(0,0,0)
		sign.Parent = safeZoneFolder

		-- Embed sign inside wall
		sign.CFrame = wall.CFrame * CFrame.new(0, 150, -(size.Z/2) + (sign.Size.Z/2))

		local billboard = Instance.new("BillboardGui")
		billboard.Size = UDim2.new(0, 150, 0, 50)
		billboard.StudsOffset = Vector3.new(0,0,0)
		billboard.AlwaysOnTop = true
		billboard.Adornee = sign
		billboard.Parent = sign

		local label = Instance.new("TextLabel")
		label.Size = UDim2.new(1,0,1,0)
		label.BackgroundTransparency = 1
		label.Text = "Avery's Safe Zone"
		label.TextScaled = true
		label.Font = Enum.Font.GothamBold
		label.TextColor3 = Color3.fromRGB(255,0,0)
		label.Parent = billboard
		RGBEffect(label)
	end

	-- Cube walls with embedded signs
	createWall(Vector3.new(-cubeSize/2, yPos + cubeHeight/2, 0), Vector3.new(wallThickness, cubeHeight, cubeSize)) -- left
	createWall(Vector3.new(cubeSize/2, yPos + cubeHeight/2, 0), Vector3.new(wallThickness, cubeHeight, cubeSize))  -- right
	createWall(Vector3.new(0, yPos + cubeHeight/2, cubeSize/2), Vector3.new(cubeSize, cubeHeight, wallThickness)) -- back
	createWall(Vector3.new(0, yPos + cubeHeight/2, -cubeSize/2), Vector3.new(cubeSize, cubeHeight, wallThickness)) -- front

	-- Pathway outside the front wall
	local path = Instance.new("Part")
	path.Size = Vector3.new(150, 10, 300)
	path.Position = Vector3.new(0, yPos + 5, -cubeSize/2 - 150)
	path.Anchored = true
	path.Material = Enum.Material.Concrete
	path.BrickColor = BrickColor.new("Medium stone grey")
	path.Parent = safeZoneFolder

	-- "Made by Avery" sign at the entrance of the path
	local makerSign = Instance.new("Part")
	makerSign.Size = Vector3.new(150, 30, 5)
	makerSign.Position = Vector3.new(0, yPos + 50, -cubeSize/2 - 300)
	makerSign.Anchored = true
	makerSign.Material = Enum.Material.SmoothPlastic
	makerSign.Color = Color3.fromRGB(0,0,0)
	makerSign.Parent = safeZoneFolder

	local makerBillboard = Instance.new("BillboardGui")
	makerBillboard.Size = UDim2.new(0, 150, 0, 50)
	makerBillboard.StudsOffset = Vector3.new(0,0,0)
	makerBillboard.AlwaysOnTop = true
	makerBillboard.Adornee = makerSign
	makerBillboard.Parent = makerSign

	local makerLabel = Instance.new("TextLabel")
	makerLabel.Size = UDim2.new(1,0,1,0)
	makerLabel.BackgroundTransparency = 1
	makerLabel.Text = "Made by Avery"
	makerLabel.TextScaled = true
	makerLabel.Font = Enum.Font.GothamBold
	makerLabel.TextColor3 = Color3.fromRGB(0,255,0)
	makerLabel.Parent = makerBillboard
	RGBEffect(makerLabel)
end

-- Remove SafeZone
local function removeSafeZone()
	if safeZoneFolder and safeZoneFolder.Parent then
		safeZoneFolder:Destroy()
		safeZoneFolder = nil
	end
end

-- Toggle button
toggleButton.MouseButton1Click:Connect(function()
	if running then
		removeSafeZone()
	else
		createSafeZone()
	end
	running = not running
end)
