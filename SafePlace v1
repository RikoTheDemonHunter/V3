--[[ 
 ðŸ“Œ Avery's Safe Zone System (Mobile Friendly, Full Build)
 Features:
 âœ… Raised Safe Zone (150 studs high)
 âœ… Full Floor/Base Platform
 âœ… Stairs + Cobblestone Path
 âœ… Walls around Safe Zone
 âœ… RGB Animated Text Sign ("Avery's Safe Zone")
 âœ… Draggable Mobile GUI Button to Toggle
--]]

repeat task.wait() until game:IsLoaded()
local Players = game:GetService("Players")
local player = Players.LocalPlayer

-- HEIGHT setting (how high above ground)
local HEIGHT_OFFSET = 150 

-- GUI
local screenGui = Instance.new("ScreenGui")
screenGui.Name = "SafeZoneGUI"
screenGui.Parent = player:WaitForChild("PlayerGui")

local toggleButton = Instance.new("TextButton")
toggleButton.Size = UDim2.new(0, 160, 0, 50)
toggleButton.Position = UDim2.new(0.05, 0, 0.2, 0)
toggleButton.Text = "Enable Safe Zone"
toggleButton.BackgroundColor3 = Color3.fromRGB(50, 50, 50)
toggleButton.TextColor3 = Color3.fromRGB(255, 255, 255)
toggleButton.Font = Enum.Font.GothamBold
toggleButton.TextScaled = true
toggleButton.Draggable = true
toggleButton.Active = true
toggleButton.Parent = screenGui

-- Function: Create Avery's RGB Sign
local function makeSign(position, text)
    local signPart = Instance.new("Part")
    signPart.Name = "SafeZoneSign"
    signPart.Size = Vector3.new(50, 20, 1)
    signPart.Anchored = true
    signPart.CanCollide = false
    signPart.Position = position + Vector3.new(0, 30, 0)
    signPart.Material = Enum.Material.Neon
    signPart.Color = Color3.fromRGB(20, 20, 20)
    signPart.Parent = workspace.SafePlace

    local surfaceGui = Instance.new("SurfaceGui")
    surfaceGui.Face = Enum.NormalId.Front
    surfaceGui.AlwaysOnTop = true
    surfaceGui.Parent = signPart

    local label = Instance.new("TextLabel")
    label.Size = UDim2.new(1, 0, 1, 0)
    label.BackgroundTransparency = 1
    label.Text = text
    label.TextColor3 = Color3.fromRGB(255, 0, 0)
    label.TextStrokeTransparency = 0
    label.TextScaled = true
    label.Font = Enum.Font.Fantasy
    label.Parent = surfaceGui

    -- Animate RGB
    task.spawn(function()
        local hue = 0
        while signPart.Parent do
            hue = (hue + 1) % 360
            label.TextColor3 = Color3.fromHSV(hue / 360, 1, 1)
            task.wait(0.05)
        end
    end)

    return signPart
end

-- Function: Build Safe Zone
local function makeSafeZone()
    if workspace:FindFirstChild("SafePlace") then return end

    local folder = Instance.new("Folder")
    folder.Name = "SafePlace"
    folder.Parent = workspace

    -- MAIN FLOOR
    local mainFloor = Instance.new("Part")
    mainFloor.Name = "MainFloor"
    mainFloor.Parent = folder
    mainFloor.Anchored = true
    mainFloor.Position = Vector3.new(0, HEIGHT_OFFSET, -1000)
    mainFloor.Size = Vector3.new(200, 5, 200)
    mainFloor.Material = Enum.Material.Concrete
    mainFloor.Color = Color3.fromRGB(180, 180, 180)
    mainFloor.CanCollide = true

    -- WALLS
    local function makeWall(name, pos, size)
        local wall = Instance.new("Part")
        wall.Name = name
        wall.Parent = folder
        wall.Anchored = true
        wall.Position = pos
        wall.Size = size
        wall.Color = Color3.fromRGB(100, 100, 100)
        wall.Material = Enum.Material.Metal
        wall.CanCollide = true
    end

    local basePos = mainFloor.Position
    local sx, sz, sy = mainFloor.Size.X / 2, mainFloor.Size.Z / 2, mainFloor.Size.Y / 2
    makeWall("WallFront", basePos + Vector3.new(0, 25, -sz), Vector3.new(mainFloor.Size.X, 50, 5))
    makeWall("WallBack",  basePos + Vector3.new(0, 25, sz),  Vector3.new(mainFloor.Size.X, 50, 5))
    makeWall("WallLeft",  basePos + Vector3.new(-sx, 25, 0), Vector3.new(5, 50, mainFloor.Size.Z))
    makeWall("WallRight", basePos + Vector3.new(sx, 25, 0),  Vector3.new(5, 50, mainFloor.Size.Z))

    -- STAIRS
    local stair = Instance.new("Part")
    stair.Name = "Stairs"
    stair.Size = Vector3.new(20, HEIGHT_OFFSET, 60)
    stair.Anchored = true
    stair.Position = basePos + Vector3.new(0, HEIGHT_OFFSET/2, sz + 30)
    stair.Orientation = Vector3.new(-30, 0, 0)
    stair.Material = Enum.Material.WoodPlanks
    stair.Color = Color3.fromRGB(200, 150, 100)
    stair.Parent = folder

    -- PATHWAY
    local path = Instance.new("Part")
    path.Name = "Path"
    path.Size = Vector3.new(20, 2, 120)
    path.Anchored = true
    path.Position = stair.Position + Vector3.new(0, -HEIGHT_OFFSET/2, 80)
    path.Material = Enum.Material.Cobblestone
    path.Color = Color3.fromRGB(120, 120, 120)
    path.Parent = folder

    -- SIGN
    makeSign(basePos + Vector3.new(0, 60, 0), "Avery's Safe Zone")
end

-- Toggle Safe Zone
local enabled = false
toggleButton.MouseButton1Click:Connect(function()
    if enabled then
        if workspace:FindFirstChild("SafePlace") then
            workspace.SafePlace:Destroy()
        end
        toggleButton.Text = "Enable Safe Zone"
        enabled = false
    else
        makeSafeZone()
        toggleButton.Text = "Disable Safe Zone"
        enabled = true
    end
end)
